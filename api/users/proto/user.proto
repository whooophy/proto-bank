syntax = "proto3";

package user;

option go_package = ".";

message SubMenu{
  string name = 1;
  bool request_download = 2;
}

message Menu{
  string name = 1;
  repeated SubMenu sub_menu = 2;
}

message Meta {
  int32 page = 1;
  int32 per_page = 2;
  int32 total = 3;
}


// Request contract
message AddUserRequest {
  string privy_id = 1;
  int32 role_id = 2;
  repeated string channel_code = 3;
  bool status = 4;
}

message AddRoleRequest{
  string role_name = 1;
  repeated Menu menu = 2 ;
}

message GetListUserRequest{
  string search = 1;
  int32 role_id = 2;
  bool string = 3;
  int32 limit = 4;
  int32 page = 5;
}

message GetListRoleRequest{
  string name = 1;
  int32 limit = 2;
  int32 page = 3;
}

message GetUserDetailRequest{
  int64 id = 1;
}

message GetRoleDetailsRequest{
  int64 id = 1;
}

message DeleteUserRequest{
  int64 id = 1;
}

message DeleteRoleRequest{
  int64 id = 1;
}

// Response
message AddUserResponse{
  string message = 1;
}

message AddRoleResponse{
  string message = 1;
}

message GetListUserResponse{
  string privy_id = 1;
  string name = 2;
  string role = 3;
  repeated string channel = 4;
  bool status = 5;
  string created_at = 6;
  Meta meta = 7;
}

message GetListRoleResponse{
  int64 id = 1;
  string name = 2;
  repeated string menu = 3;
  string created_at = 4;
  Meta meta = 5;
}

message GetUserDetailResponse{
  string privy_id = 1;
  string name = 2;
  string role = 3;
  bool status = 4;
  repeated string channels = 5;
}

message GetRoleDetailResponse{
  int64 id = 1;
  string name = 2;
  repeated Menu menu = 3;
}

message DeleteUserResponse{
  string message = 1;
}

message DeleteRoleResponse{
  string message = 1;
}

service UserService {
  rpc AddUser(AddUserRequest) returns (AddUserResponse);
  rpc AddRole(AddRoleRequest) returns (AddRoleResponse);
  rpc GetUserList(GetListUserRequest) returns (GetListUserResponse);
  rpc GetRoleList(GetListRoleRequest) returns (GetListRoleResponse);
  rpc GetUserDetail(GetUserDetailRequest) returns (GetUserDetailResponse);
  rpc GetRoleDetail(GetRoleDetailsRequest) returns (GetRoleDetailResponse);
  rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse);
  rpc DeleteRole(DeleteRoleRequest) returns (DeleteRoleResponse);
}
